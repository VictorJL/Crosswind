var configuration := settings()

configuration.window.title      = "libcrosswind engine 0.2"
//configuration.window.resolution := i32vec2(1024, 768) // does not replace the value
//configuration.window.resolution = i32vec2(1024, 768) // exits the application

configuration.window.resolution.x = 1024
configuration.window.resolution.y = 768

configuration.window.resizable  = true
var nucleus := engine(configuration)

add_global(nucleus.core, "core")
add_global(nucleus.stage, "stage")

core.filesystem.add_directory("assets", true)
core.video.set_window_icon(core.filesystem.get_file_path("icon.png"))

add_global(eval_file("scripts/actors/panel.chai"), "create_panel")
add_global(eval_file("scripts/actors/border.chai"), "create_border")
add_global(eval_file("scripts/actors/table.chai"), "create_table")
add_global(eval_file("scripts/actors/column.chai"), "create_column")
add_global(eval_file("scripts/actors/button.chai"), "create_button")
add_global(eval_file("scripts/actors/label.chai"), "create_label")
add_global(eval_file("scripts/actors/control.chai"), "create_control")

eval_file("scripts/scenes/main_scene.chai")

nucleus.run()